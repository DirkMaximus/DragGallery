{"version":3,"file":"index.js","mappings":"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","sources":["webpack://drag-gallery/./src/DragGalleryEdit.js","webpack://drag-gallery/./src/DragGalleryImage.js","webpack://drag-gallery/./src/edit.js","webpack://drag-gallery/./src/index.js","webpack://drag-gallery/./src/save.js","webpack://drag-gallery/./src/editor.css","webpack://drag-gallery/./src/style.css","webpack://drag-gallery/external window [\"wp\",\"blockEditor\"]","webpack://drag-gallery/external window [\"wp\",\"blocks\"]","webpack://drag-gallery/external window [\"wp\",\"element\"]","webpack://drag-gallery/webpack/bootstrap","webpack://drag-gallery/webpack/runtime/chunk loaded","webpack://drag-gallery/webpack/runtime/compat get default export","webpack://drag-gallery/webpack/runtime/define property getters","webpack://drag-gallery/webpack/runtime/hasOwnProperty shorthand","webpack://drag-gallery/webpack/runtime/make namespace object","webpack://drag-gallery/webpack/runtime/jsonp chunk loading","webpack://drag-gallery/webpack/before-startup","webpack://drag-gallery/webpack/startup","webpack://drag-gallery/webpack/after-startup"],"sourcesContent":["export default class DragGalleryEdit {\r\n\r\n\tconstructor() {\r\n\t\t/*\r\n\t    {\r\n\t        int: (integer),\r\n\t        speed: (number)\r\n\t    }\r\n\t    */\r\n\t\tthis.dragScrollObj = {\r\n\t\t\tint: null,\r\n\t\t\tspeed: null\r\n\t\t};\r\n\t\t\r\n\t\tthis.MIN_DRAG = 3;\r\n\r\n\t\tthis.scrollSelector = '.interface-interface-skeleton__content';\r\n\r\n\t\tthis.imageMove = this.imageMove.bind(this);\r\n\t\tthis.imageUp = this.imageUp.bind(this);\r\n\t\tthis.dragScroll = this.dragScroll.bind(this);\r\n\t}\r\n\r\n\tsetAttributeObject(props) {\r\n\t\tthis.props = props;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tgetClientPos(e, referencePos) {\r\n\t\tvar clientX = e.clientX;\r\n\t\tvar clientY = e.clientY;\r\n\r\n\t\tif(!clientX) {\r\n\r\n\t\t\tvar touches;\r\n\r\n\t\t\tif(e.touches && e.touches.length > 0) {\r\n\t\t\t\ttouches = e.touches;\r\n\t\t\t} else if(e.originalEvent.touches && e.originalEvent.touches.length > 0) {\r\n\t\t\t\ttouches = e.originalEvent.touches;\r\n\t\t\t}\r\n\r\n\t\t\tif(touches) {\r\n\t\t\t\tif(referencePos) {\r\n\t\t\t\t\tvar closest = touches[0];\r\n\t\t\t\t\tvar closest_dist = getDistance(referencePos, {\r\n\t\t\t\t\t\tx: touches[0].clientX,\r\n\t\t\t\t\t\ty: touches[0].clientY\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfor(var i = 1; i < touches.length; i++) {\r\n\t\t\t\t\t\tvar dist = getDistance(referencePos, {\r\n\t\t\t\t\t\t\tx: touches[i].clientX,\r\n\t\t\t\t\t\t\ty: touches[i].clientY\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif(dist < closest_dist) {\r\n\t\t\t\t\t\t\tclosest = touches[i];\r\n\t\t\t\t\t\t\tclosest_dist = dist;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclientX = closest.clientX;\r\n\t\t\t\t\tclientY = closest.clientY;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclientX = touches[0].clientX;\r\n\t\t\t\t\tclientY = touches[0].clientY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar pos = {\r\n\t\t\tx: clientX,\r\n\t\t\ty: clientY\r\n\t\t};\r\n\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tanim_scroll(locY, time) {\r\n\t\tif(time == null) time = 600;\r\n\r\n\t\tjQuery(this.scrollSelector).animate({\r\n\t\t\tscrollTop: locY\r\n\t\t}, time);\r\n\t}\r\n\r\n\r\n\r\n\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t/*\r\n\tGet an array of all image elements in a row\r\n\t@param gallery(element): .drag-gallery element\r\n\t@param row_num(int): if row_image is null, row_num can be used instead\r\n\t*/\r\n\tgetRow(gallery, row_num) {\r\n\r\n\t\tlet row_image_arr = new Array();\r\n\r\n\t\t//let images = jQuery(gallery).find('.image, .placeholder.current');\r\n\t\tlet images = jQuery(gallery).find('.image');\r\n\r\n\t\tfor(let i = 0; i < images.length; i++) {\r\n\t\t\tconst image = images[i];\r\n\r\n\t\t\tif(parseFloat(jQuery(image).attr('data-row')) == row_num) {\r\n\t\t\t\trow_image_arr.push(image);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row_image_arr;\r\n\t}\r\n\tremoveFromRow(arr, image) {\r\n\t\tfor(let i = 0; i < arr.length; i++) {\r\n\t\t\tif(image === arr[i]) {\r\n\t\t\t\tarr.splice(i, 1);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tgetNextAvailableRow(gallery) {\r\n\t\tlet next = 1;\r\n\r\n\t\tconst self = this;\r\n\t\tjQuery(gallery).find('.image').each(function(index) {\r\n\t\t\tconst rowNum = parseFloat(jQuery(this).attr('data-row'));\r\n\t\t\tif(rowNum >= next) next = rowNum + 1;\r\n\t\t});\r\n\r\n\t\treturn next;\r\n\t}\r\n\r\n\r\n\r\n\r\n\tgetAttImagesCopy() {\r\n\t\treturn this.props.attributes.images.map((x) => x);\r\n\t}\r\n\tgetAttImgCopy(att_images, index) {\r\n\t\tlet att_img = att_images[index];\r\n\t\tatt_img = Object.assign({}, att_img);\r\n\t\treturn att_img;\r\n\t}\r\n\r\n\r\n\r\n\r\n\tdragScroll() {\r\n\t\tconst scrollTop = jQuery(this.scrollSelector).scrollTop();\r\n\t\tjQuery(this.scrollSelector).scrollTop(scrollTop + this.dragScrollObj.speed);\r\n\t}\r\n\tgetOverImage() {\r\n\t\tlet over_image;\r\n\r\n\t\tconst drag = jQuery('.drag-image');\r\n\t\tconst gallery = jQuery(drag).data('gallery');\r\n\t\tlet images = jQuery(gallery).find('.image');\r\n\r\n\t\tlet overY_image;\r\n\t\tfor(let i = 0; i < images.length; i++) {\r\n\r\n\t\t\tconst image = images[i];\r\n\t\t\tconst image_rect = image.getBoundingClientRect();\r\n\r\n\t\t\tif(this.clientPos.y < image_rect.bottom &&\r\n\t\t\t\tthis.clientPos.y > image_rect.top) {\r\n\t\t\t\toverY_image = image;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t//See if drag is above this image / between this image and the previous one\r\n\t\t\tif(!overY_image) {\r\n\r\n\t\t\t\tif(this.clientPos.y < image_rect.top) {\r\n\t\t\t\t\tif(i == 0) {\r\n\t\t\t\t\t\toverY_image = image;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst prev_image = images[i - 1];\r\n\t\t\t\t\t\tconst prev_rect = prev_image.getBoundingClientRect();\r\n\t\t\t\t\t\tconst dist_prev = this.clientPos.y - prev_rect.bottom;\r\n\t\t\t\t\t\tconst dist = image_rect.top - this.clientPos.y;\r\n\r\n\t\t\t\t\t\tif(Math.abs(dist_prev) < Math.abs(dist)) {\r\n\t\t\t\t\t\t\toverY_image = prev_image;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\toverY_image = image;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//If this is the last image, see if drag is below\r\n\t\t\tif(!overY_image) {\r\n\t\t\t\tif(i == images.length - 1) {\r\n\t\t\t\t\toverY_image = image;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst row = window.dragGallery.getRow(gallery, parseFloat(jQuery(overY_image).attr('data-row')));\r\n\t\tfor(let i = 0; i < row.length; i++) {\r\n\r\n\t\t\tconst image = row[i];\r\n\t\t\tconst image_rect = image.getBoundingClientRect();\r\n\r\n\t\t\tif(this.clientPos.x < image_rect.right &&\r\n\t\t\t\tthis.clientPos.x > image_rect.left) {\r\n\t\t\t\tover_image = image;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t//See if drag is left of this image / between this image and the previous one\r\n\t\t\tif(!over_image) {\r\n\r\n\t\t\t\tif(this.clientPos.x < image_rect.left) {\r\n\t\t\t\t\tif(i == 0) {\r\n\t\t\t\t\t\tover_image = image;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst prev_image = row[i - 1];\r\n\t\t\t\t\t\tconst prev_rect = prev_image.getBoundingClientRect();\r\n\t\t\t\t\t\tconst dist_prev = this.clientPos.x - prev_rect.right;\r\n\t\t\t\t\t\tconst dist = image_rect.left - this.clientPos.x;\r\n\r\n\t\t\t\t\t\tif(Math.abs(dist_prev) < Math.abs(dist)) {\r\n\t\t\t\t\t\t\tover_image = prev_image;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tover_image = image;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//If this is the last image, see if drag is below\r\n\t\t\tif(!over_image) {\r\n\t\t\t\tif(i == row.length - 1) {\r\n\t\t\t\t\tover_image = image;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn over_image;\r\n\t}\r\n\t\r\n\t//TO DO: change direc so that it only returns value at edges.\r\n\tgetOverDirec(over_image) {\r\n\t\t\r\n\t\tconst over_rect = over_image.getBoundingClientRect();\r\n\r\n\t\tconst dist_top = this.clientPos.y - over_rect.top;\r\n\t\tconst dist_bottom = over_rect.bottom - this.clientPos.y;\r\n\t\tconst dist_left = this.clientPos.x - over_rect.left;\r\n\t\tconst dist_right = over_rect.right - this.clientPos.x;\r\n\r\n\t\tlet closestY = {\r\n\t\t\tloc: 'top',\r\n\t\t\tdist: dist_top\r\n\t\t};\r\n\t\tif(Math.abs(dist_bottom) < Math.abs(dist_top)) {\r\n\t\t\tclosestY = {\r\n\t\t\t\tloc: 'bottom',\r\n\t\t\t\tdist: dist_bottom\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet closestX = {\r\n\t\t\tloc: 'left',\r\n\t\t\tdist: dist_left\r\n\t\t};\r\n\t\tif(Math.abs(dist_right) < Math.abs(dist_left)) {\r\n\t\t\tclosestX = {\r\n\t\t\t\tloc: 'right',\r\n\t\t\t\tdist: dist_right\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet direc;\r\n\t\tif(closestY.dist < 0 && closestX.dist < 0) {\r\n\t\t\t//outside\r\n\t\t\t\r\n\t\t\tif(closestY.dist < closestX.dist) {\r\n\t\t\t\tdirec = closestY.loc;\r\n\t\t\t} else {\r\n\t\t\t\tdirec = closestX.loc;\r\n\t\t\t}\r\n\t\t}else if(closestY.dist < 0) {\r\n\t\t\t//outside\r\n\t\t\t\r\n\t\t\tdirec = closestY.loc;\r\n\t\t\t\r\n\t\t}else if(closestX.dist < 0) {\r\n\t\t\t//outside\r\n\t\t\t\r\n\t\t\tdirec = closestX.loc;\r\n\t\t\t\r\n\t\t}else{\r\n\t\t\t//inside\r\n\t\t\t\r\n\t\t\tif(Math.abs(closestY.dist) < Math.abs(closestX.dist)) {\r\n\t\t\t\tdirec = closestY.loc;\r\n\t\t\t} else {\r\n\t\t\t\tdirec = closestX.loc;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn direc;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t/*\r\n\t@param e(MouseEvent)\r\n\t@param attributes(object): Gutenberg Block instance attributes object\r\n\t*/\r\n\tstartDrag(e) {\r\n\t\t\r\n\t\t//Set the gallery down state\r\n\t\tconst gallery = jQuery(e.currentTarget).parents('.drag-gallery')[0];\r\n\t\tjQuery(gallery).addClass('dg-dragging');\r\n\t\tjQuery(gallery).data('dragready', true).data('dragging', false);\r\n\t\t\r\n\t\t//Record the clicked item\r\n\t\tthis.dragging = e.currentTarget;\r\n\t\t\r\n\t\t//Save the click position\r\n\t\tconst clientPos = this.getClientPos(e);\r\n\t\tjQuery(gallery).data('downClientPos', clientPos);\r\n\r\n\t\tjQuery(document).on('mousemove', this.imageMove);\r\n\t\tjQuery(document).on('mouseup', this.imageUp);\r\n\t}\r\n\r\n\timageMove(e) {\r\n\t\t\r\n\t\tconst gallery = jQuery('.drag-gallery.dg-dragging')[0];\r\n\t\t\r\n\t\tthis.clientPos = this.getClientPos(e);\r\n\t\t\r\n\t\tlet drag;\r\n\t\t\r\n\t\tif(jQuery(gallery).data('dragready')\r\n\t\t&& !jQuery(gallery).data('dragging')) {\r\n\t\t\t\r\n\t\t\tthis.downClientPos = jQuery(gallery).data('downClientPos');\r\n\t\t\tconst distX = this.clientPos.x - this.downClientPos.x;\r\n\t\t\tconst distY = this.clientPos.y - this.downClientPos.y;\r\n\t\t\tlet dist = distX;\r\n\t\t\tif(Math.abs(distY) > Math.abs(distX)) dist = distY;\r\n\t\t\t\r\n\t\t\tif(Math.abs(dist) > this.MIN_DRAG) {\r\n\t\t\t\r\n\t\t\t\tjQuery(gallery).data('dragging', true);\r\n\t\t\t\t\r\n\t\t\t\t//Create drag image\r\n\t\t\t\tdrag = document.createElement('div');\r\n\t\t\t\tjQuery(drag).data('gallery', gallery);\r\n\t\t\t\tjQuery(drag).addClass('drag-image');\r\n\t\t\t\t//jQuery(drag).css('width', jQuery(e.currentTarget).outerWidth() / 2 + 'px');\r\n\t\t\t\tjQuery(drag).append(jQuery(this.dragging).find('img').clone());\r\n\t\t\t\tjQuery('body').append(drag);\r\n\t\t\t\t\r\n\t\t\t\t//Fade the dragging image\r\n\t\t\t\tjQuery(this.dragging).addClass('dragging');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\tif(jQuery(gallery).data('dragging')) {\r\n\t\t\t\r\n\t\t\tconst drag = jQuery('.drag-image');\r\n\t\t\t\r\n\t\t\tjQuery(drag).offset({\r\n\t\t\t\ttop: this.clientPos.y - jQuery(drag).outerHeight() / 2,\r\n\t\t\t\tleft: this.clientPos.x - jQuery(drag).outerWidth() / 2\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//Scroll the page if dragged to top or bottom\r\n\t\t\tconst screenHeight = window.innerHeight;\r\n\t\t\tlet speed = 0;\r\n\t\t\tconst screenMarginPercent = .15\r\n\t\t\tif(this.clientPos.y < screenHeight * screenMarginPercent) {\r\n\t\t\t\tspeed = this.clientPos.y - screenHeight * screenMarginPercent;\r\n\t\t\t} else if(this.clientPos.y > screenHeight * (1 - screenMarginPercent)) {\r\n\t\t\t\tspeed = this.clientPos.y - screenHeight * (1 - screenMarginPercent);\r\n\t\t\t}\r\n\t\t\tclearInterval(this.dragScrollObj.int);\r\n\t\t\tif(speed) {\r\n\t\t\t\tthis.dragScrollObj = {\r\n\t\t\t\t\tint: setInterval(this.dragScroll, 10),\r\n\t\t\t\t\tspeed: speed / 2\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//insert the dragging image into the appropriate grid location\r\n\t\t\t//const gallery = jQuery(drag).data('gallery');\r\n\t\t\tconst images = jQuery(gallery).find('.image');\r\n\r\n\t\t\tconst over_image = this.getOverImage();\r\n\t\t\tconst overImageIndex = jQuery(images).index(over_image);\r\n\t\t\tconst overImageRowNum = parseFloat(jQuery(over_image).attr('data-row'));\r\n\t\t\tconst overImageRow = this.getRow(gallery, overImageRowNum);\r\n\t\t\tconst overImageRowIndex = overImageRow.indexOf(over_image);\r\n\t\t\t\r\n\t\t\tjQuery(images).removeClass('over-image over-image-row');\r\n\t\t\tjQuery(over_image).addClass('over-image');\r\n\t\t\t/*for(let i = 0; i < overImageRow.length; i++) {\r\n\t\t\t\tjQuery(overImageRow[i]).addClass('over-image-row');\r\n\t\t\t}*/\r\n\t\t\t\r\n\t\t\t//If no value and over_image hasn't changed, do not try to place a placeholder.\r\n\t\t\tconst direc = this.getOverDirec(over_image);\r\n\t\t\t\r\n\t\t\tif(over_image == this.dragging\r\n\t\t\t&& (\r\n\t\t\t\toverImageRow.length == 1\r\n\t\t\t\t|| (\r\n\t\t\t\t\tdirec == 'right'\r\n\t\t\t\t\t|| direc == 'left'\r\n\t\t\t\t)\r\n\t\t\t)) {\r\n\t\t\t\t//Ignore this dragover IF:\r\n\t\t\t\t//over_image is also this.dragging\r\n\t\t\t\t//AND over_image is in its own row\r\n\t\t\t\t//OR over_image shares its row AND direc is left/right\r\n\t\t\t\t\r\n\t\t\t\tjQuery(images).css('transform', '');\r\n\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t\tswitch(direc) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(images).each(function(index) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(overImageRow.includes(this)) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM())+'px, 0)');\r\n\t\t\t\t\t\t\t}else if(index < overImageIndex) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM()*-1)+'px, 0)');\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM())+'px, 0)');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(images).each(function(index) {\r\n\t\t\t\t\t\t\tif(overImageRow.includes(this)) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM()*-1)+'px, 0)');\r\n\t\t\t\t\t\t\t}else if(index <= overImageIndex) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM()*-1)+'px, 0)');\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', 'translate3d(0, '+(window.dragGallery.getREM())+'px, 0)');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(images).each(function(index) {\r\n\t\t\t\t\t\t\tif(!overImageRow.includes(this)) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(let i = 0; i < overImageRow.length; i++) {\r\n\t\t\t\t\t\t\tif(i <= overImageRowIndex) {\r\n\t\t\t\t\t\t\t\tjQuery(overImageRow[i]).css('transform', 'translate3d('+(window.dragGallery.getREM()*-2)+'px, 0, 0)');\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tjQuery(overImageRow[i]).css('transform', 'translate3d('+(window.dragGallery.getREM()*2)+'px, 0, 0)');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(images).each(function(index) {\r\n\t\t\t\t\t\t\tif(!overImageRow.includes(this)) {\r\n\t\t\t\t\t\t\t\tjQuery(this).css('transform', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(let i = 0; i < overImageRow.length; i++) {\r\n\t\t\t\t\t\t\tif(i < overImageRowIndex) {\r\n\t\t\t\t\t\t\t\tjQuery(overImageRow[i]).css('transform', 'translate3d('+(window.dragGallery.getREM()*-2)+'px, 0, 0)');\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tjQuery(overImageRow[i]).css('transform', 'translate3d('+(window.dragGallery.getREM()*2)+'px, 0, 0)');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\timageUp(e) {\r\n\r\n\t\tconst gallery = jQuery('.drag-gallery.dg-dragging')[0];\r\n\t\tconst dragging = jQuery(gallery).data('dragging');\r\n\t\tconst images = jQuery(gallery).find('.image');\r\n\t\t\r\n\t\tif(dragging) {\r\n\t\t\r\n\t\t\tconst drag = jQuery('.drag-image');\r\n\t\t\t\r\n\t\t\tconst over_image = this.getOverImage();\r\n\t\t\tconst overImageIndex = jQuery(images).index(over_image);\r\n\t\t\tconst overImageRowNum = parseFloat(jQuery(over_image).attr('data-row'));\r\n\t\t\tconst overImageRow = this.getRow(gallery, overImageRowNum);\r\n\t\t\tconst overImageRowIndex = overImageRow.indexOf(over_image);\r\n\t\t\t\r\n\t\t\tconst direc = this.getOverDirec(over_image);\r\n\t\t\t\r\n\t\t\tjQuery(drag).remove();\r\n\t\t\r\n\t\t\tif(over_image == this.dragging\r\n\t\t\t&& (\r\n\t\t\t\toverImageRow.length == 1\r\n\t\t\t\t|| (\r\n\t\t\t\t\tdirec == 'right'\r\n\t\t\t\t\t|| direc == 'left'\r\n\t\t\t\t)\r\n\t\t\t)) {\r\n\t\t\t\t//no drop\r\n\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t\tlet rowNum;\r\n\t\t\t\tlet rowIndex;\r\n\t\t\t\tlet insertIndex;\r\n\t\t\t\t\r\n\t\t\t\tswitch(direc) {\r\n\t\t\t\t\tcase 'top':\r\n\t\t\t\t\t\trowNum = window.dragGalleryEdit.getNextAvailableRow(gallery);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trowIndex = jQuery(images).index(overImageRow[0]);\r\n\t\t\t\t\t\tinsertIndex = rowIndex;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'bottom':\r\n\t\t\t\t\t\trowNum = window.dragGalleryEdit.getNextAvailableRow(gallery);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trowIndex = jQuery(images).index(overImageRow[overImageRow.length-1]);\r\n\t\t\t\t\t\tinsertIndex = rowIndex+1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\trowNum = parseFloat(jQuery(over_image).attr('data-row'));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tinsertIndex = overImageIndex;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'right':\r\n\t\t\t\t\t\trowNum = parseFloat(jQuery(over_image).attr('data-row'));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tinsertIndex = overImageIndex+1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst removeIndex = jQuery(images).index(this.dragging);\r\n\t\t\t\tif(removeIndex < insertIndex) insertIndex--;\r\n\t\t\t\t\r\n\t\t\t\tconst att_images = this.getAttImagesCopy();\r\n\t\t\t\tlet att_img = this.getAttImgCopy(att_images, removeIndex);\r\n\t\t\t\tatt_img.row = rowNum;\r\n\t\t\t\t\r\n\t\t\t\tatt_images.splice(removeIndex, 1);\r\n\t\t\t\tatt_images.splice(insertIndex, 0, att_img);\r\n\t\t\t\t\r\n\t\t\t\tthis.props.setAttributes({\r\n\t\t\t\t    images: att_images\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\twindow.dragGallery.renderRows();\r\n\t\t\t\r\n\t\t\t//Scroll the page to dragging image\r\n\t\t\tconst self = this;\r\n\t\t\tconst scrollTarget = this.dragging;\r\n\t\t\tlet scrollOffset = jQuery(scrollTarget).position().top;\r\n\t\t\tjQuery(scrollTarget).parents().each(function(index) {\r\n\t\t\t    \r\n\t\t\t    const scrollerclass = self.scrollSelector.slice(1);\r\n\t\t\t    const el = jQuery(this);\r\n\t\t\t    \r\n\t\t\t    if(el.hasClass(scrollerclass)\r\n\t\t\t    || el.parent().hasClass(scrollerclass)) {\r\n\t\t\t        return false;\r\n\t\t\t    }else{\r\n\t\t\t        scrollOffset += el.position().top;\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t\tthis.anim_scroll(Math.abs(scrollOffset));\r\n\t\t}\r\n\t\t\r\n\t\tclearInterval(this.dragScrollObj.int);\r\n\t\t\r\n\t\tjQuery(document).off('mousemove', this.imageMove);\r\n\t\tjQuery(document).off('mouseup', this.imageUp);\r\n\t\t\r\n\t\tjQuery('.drag-gallery').removeClass('dg-dragging').removeData('dragready').removeData('dragging');\r\n\t\t\r\n\t\tjQuery(images)\r\n\t\t.removeClass('dragging over-image over-image-row')\r\n\t\t.css('transform', '');\r\n\t}\r\n\r\n}","import { useEffect, createRef, useState } from '@wordpress/element';\r\n\r\nconst { Component, Fragment } = wp.element;\r\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\r\nconst { Button, IconButton, Toolbar, ToolbarGroup, ToolbarButton } = wp.components;\r\n\r\nexport default class DragGalleryImage extends Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.el = createRef();\r\n\t\t\r\n\t\tthis.imageDown = this.imageDown.bind(this);\r\n\t\tthis.imageClick = this.imageClick.bind(this);\r\n\t\tthis.replaceImage = this.replaceImage.bind(this);\r\n\t\tthis.linkClick = this.linkClick.bind(this);\r\n\t\tthis.linkCancel = this.linkCancel.bind(this);\r\n\t\tthis.linkUpdate = this.linkUpdate.bind(this);\r\n\t}\r\n\tgetArrayCopy(arr) {\r\n\t\treturn arr.map((x) => x);\r\n\t}\r\n\tgetObjectCopy(obj) {\r\n\t\treturn Object.assign({}, obj);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t//TO DO: fix right click\r\n\timageDown(e) {\r\n\r\n\t\twindow.dragGalleryEdit.setAttributeObject(this.props.parentprops);\r\n\r\n\t\twindow.dragGalleryEdit.startDrag(e);\r\n\t}\r\n\timageClick(e) {\r\n\t\tconst gallery = jQuery(e.currentTarget).parents('.drag-gallery')[0];\r\n\t\t\r\n\t\tconst images = jQuery(gallery).find('.image');\r\n\t\timages.removeClass('selected');\r\n\t\t\r\n\t\timages.not(e.currentTarget).find('.linksettings').removeClass('open');\r\n\t\t\r\n\t\tjQuery(e.currentTarget).addClass('selected');\r\n\t}\r\n\t\r\n\treplaceImage(media) {\r\n\t\t\r\n\t\tconst selected = this.el.current;\r\n\t\t\r\n\t\tconst gallery = jQuery(selected).parents('.drag-gallery')[0];\r\n\t\tconst index = jQuery(gallery).find('.image').index(selected);\r\n\t\t\r\n\t\tconst att_img = this.getObjectCopy(this.props.parentprops.attributes.images[index]);\r\n\t\tatt_img.id = media.id;\r\n\t\tatt_img.url = media.url;\r\n\t\t\r\n\t\tconst att_images = this.getArrayCopy(this.props.parentprops.attributes.images);\r\n\t\tatt_images[index] = att_img;\r\n\t\t\r\n\t\tthis.props.parentprops.setAttributes({images: att_images});\r\n\t\t\r\n\t\twindow.dragGallery.waitForImages();\r\n\t}\r\n\t\r\n\tlinkClick(e) {\r\n\t\tconst image = jQuery(e.currentTarget).parents('.image')[0];\r\n\t\tconst linksettings = jQuery(image).find('.linksettings')[0];\r\n\t\t\r\n\t\t//Set the checked status\r\n\t\t//TO DO: move this to componentDidMount?\r\n\t\tlet linkoption_none_checked = false;\r\n\t\tlet linkoption_image_checked = false;\r\n\t\tlet linkoption_custom_checked = false;\r\n\t\t\r\n\t\tswitch(this.props.data.linktype) {\r\n\t\t\tcase 'image':\r\n\t\t\t\tlinkoption_image_checked = 'checked';\r\n\t\t\tbreak;\r\n\t\t\tcase 'url':\r\n\t\t\t\tlinkoption_custom_checked = 'checked';\r\n\t\t\tbreak;\r\n\t\t\tcase 'none':\r\n\t\t\tdefault:\r\n\t\t\t\tlinkoption_none_checked = 'checked';\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tconst fieldIds = this.getFieldIds();\r\n\t\tconst linkoption_none_input = jQuery(linksettings).find('input#'+fieldIds.linkoption_none_id)[0];\r\n\t\tconst linkoption_image_input = jQuery(linksettings).find('input#'+fieldIds.linkoption_image_id)[0];\r\n\t\tconst linkoption_custom_input = jQuery(linksettings).find('input#'+fieldIds.linkoption_custom_id)[0];\r\n\t\tjQuery(linkoption_none_input).prop('checked', linkoption_none_checked);\r\n\t\tjQuery(linkoption_image_input).prop('checked', linkoption_image_checked);\r\n\t\tjQuery(linkoption_custom_input).prop('checked', linkoption_custom_checked);\r\n\t\t\r\n\t\tif(jQuery(linksettings).hasClass('open')) {\r\n\t\t\tjQuery(linksettings).removeClass('open');\r\n\t\t}else{\r\n\t\t\tjQuery(linksettings).addClass('open');\r\n\t\t}\r\n\t}\r\n\tlinkCancel(e) {\r\n\t\tjQuery(e.currentTarget).parents('.linksettings').removeClass('open');\r\n\t}\r\n\tlinkUpdate(e) {\r\n\t\t\r\n\t\tconst item = this.getObjectCopy(this.props.data);\r\n\t\t\r\n\t\tconst image = jQuery(e.currentTarget).parents('.image')[0];\r\n\t\tconst gallery = jQuery(image).parents('.drag-gallery')[0];\r\n\t\tconst index = jQuery(gallery).find('.image').index(image);\r\n\t\t\r\n\t\tconst linksettings = jQuery(image).find('.linksettings')[0];\r\n\t\t\r\n\t\tconst fieldIds = this.getFieldIds();\r\n\t\tconst selected_input = jQuery(linksettings).find('input[name='+fieldIds.linkoption_group_id+']:checked')[0];\r\n\t\tconst customurl_input = jQuery(linksettings).find('input#'+fieldIds.customlink_id)[0];\r\n\t\t\r\n\t\tif(selected_input) {\r\n\t\t\t\r\n\t\t\tconst val = jQuery(selected_input).val();\r\n\t\t\titem.linktype = val;\r\n\t\t\t\r\n\t\t\tswitch(val) {\r\n\t\t\t\tcase 'url':\r\n\t\t\t\t\titem.link = jQuery(customurl_input).val();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Save changes\r\n\t\tconst images = this.getArrayCopy(this.props.parentprops.attributes.images);\r\n\t\timages[index] = item;\r\n\t\tthis.props.parentprops.setAttributes({images: images});\r\n\t\t\r\n\t\t//Close popup\r\n\t\tjQuery(e.currentTarget).parents('.linksettings').removeClass('open');\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tgetFieldIds() {\r\n\t\t\r\n\t\tconst clientId = this.props.parentprops.clientId;\r\n\t\tconst imageId = this.props.data.imageID;\r\n\t\t\r\n\t\treturn {\r\n\t\t\tlinkoption_group_id: 'linkoption_'+clientId+'_'+imageId,\r\n\t\t\tlinkoption_none_id: 'linkoption_'+clientId+'_'+imageId+'_none',\r\n\t\t\tlinkoption_image_id: 'linkoption_'+clientId+'_'+imageId+'_image',\r\n\t\t\tlinkoption_custom_id: 'linkoption_'+clientId+'_'+imageId+'_custom',\r\n\t\t\tcustomlink_id: 'customlink_'+clientId+'_'+imageId\r\n\t\t}\r\n\t}\r\n\t\r\n\trenderToolbar() {\r\n\t\t\r\n\t\tconst clientId = this.props.parentprops.clientId;\r\n\t\tconst imageId = this.props.data.imageID;\r\n\t\t\r\n\t\tconst fieldIds = this.getFieldIds();\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"imagetoolbar\">\r\n\t\t\t\t<Toolbar>\r\n\t\t\t\t\t<ToolbarButton \r\n\t\t\t\t\t\tlabel=\"Link\"\r\n\t\t\t\t\t\ticon={() => (\r\n\t\t\t\t\t\t\t<span className=\"dashicons dashicons-admin-links\"></span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\tclassName=\"link\"\r\n\t\t\t\t\t\tonClick={this.linkClick}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<MediaUploadCheck>\r\n\t\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\t\tallowedTypes={['image']}\r\n\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\tgallery={false}\r\n\t\t\t\t\t\t\tonSelect={this.replaceImage}\r\n\t\t\t\t\t\t\trender={({open}) => (\r\n\t\t\t\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\t\t\t\tlabel=\"Change Image\"\r\n\t\t\t\t\t\t\t\t\ticon={() => (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"dashicons dashicons-format-image\"></span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"change\"\r\n\t\t\t\t\t\t\t\t\tonClick={open}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</MediaUploadCheck>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"linksettings\">\r\n\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tid={fieldIds.linkoption_none_id}\r\n\t\t\t\t\t\t\t\tname={fieldIds.linkoption_group_id}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"none\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor={fieldIds.linkoption_none_id}\r\n\t\t\t\t\t\t\t>No link</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tid={fieldIds.linkoption_image_id}\r\n\t\t\t\t\t\t\t\tname={fieldIds.linkoption_group_id}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"image\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor={fieldIds.linkoption_image_id}\r\n\t\t\t\t\t\t\t>Link to image</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item\">\r\n\t\t\t\t\t\t<div className=\"content grow\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\t\t\tid={fieldIds.linkoption_custom_id}\r\n\t\t\t\t\t\t\t\tname={fieldIds.linkoption_group_id}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"url\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tid={fieldIds.customlink_id}\r\n\t\t\t\t\t\t\t\tname={fieldIds.customlink_id}\r\n\t\t\t\t\t\t\t\tvalue={this.props.link}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Custom URL\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"item right\">\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={this.linkUpdate}\r\n\t\t\t\t\t\t\t>Update link</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={this.linkCancel}\r\n\t\t\t\t\t\t\t>Cancel</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={this.el}\r\n\t\t\t\tclassName=\"image\"\r\n\t\t\t\tdata-imageid={this.props.data.imageID}\r\n\t\t\t\tdata-row={this.props.data.row}\r\n\t\t\t\tonMouseDown={this.imageDown}\r\n\t\t\t\tonClick={this.imageClick}\r\n\t\t\t>\r\n\t\t\t\t{this.renderToolbar()}\r\n\t\t\t\t\r\n\t\t\t\t<img src={this.props.data.url} data-id={this.props.data.id} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}","import { useBlockProps } from '@wordpress/block-editor';\r\nimport DragGalleryImage from './DragGalleryImage.js';\r\n\r\nconst { Component, Fragment } = wp.element;\r\nconst { MediaUpload, MediaUploadCheck } = wp.blockEditor;\r\nconst { Button } = wp.components;\r\n\r\nexport default function Edit(props) {\r\n\t\r\n\t//const [selected, setSelected] = useState(null);\r\n\t//props.setAttributes({el: createRef()});\r\n\t\r\n\tfunction getArrayCopy(arr) {\r\n\t\treturn arr.map((x) => x);\r\n\t}\r\n\tfunction getObjectCopy(obj) {\r\n\t\treturn Object.assign({}, obj);\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\tfunction selectImage(media) {\r\n        \r\n        var newImages = new Array();\r\n        let imageID = getNextAvailableID();\r\n        let row = getNextAvailableRow();\r\n        \r\n        if(media.length) {//Array of images\r\n            \r\n            /*\r\n            BUG: Function is called twice.\r\n            For now, see if the last media.length items in attributes.images match the media items.\r\n            If so, skip the operation.\r\n            */\r\n            let match = true;\r\n            const offset = props.attributes.images.length - media.length;\r\n            if(offset >= 0) {\r\n                for(let i = props.attributes.images.length-(1+media.length); i < props.attributes.images-1; i++) {\r\n                    if(props.attributes.images[i].id != media[i-offset].id) {\r\n                        match = false;\r\n                        break;\r\n                    }\r\n                }\r\n            }else{\r\n                match = false;\r\n            }\r\n            \r\n            if(!match) {\r\n                \r\n                for(let i = 0; i < media.length; i++) {\r\n                    newImages.push({\r\n                        id: media[i].id,\r\n                        url: media[i].url,\r\n                        imageID: imageID+i,\r\n                        row: row+i,\r\n                        linktype: 'image',\r\n                        link: null\r\n                    });\r\n                }\r\n            }\r\n        }else{//Single image\r\n            \r\n            if(lastImage.id != media.id) {\r\n                newImages.push({\r\n                    id: media.id,\r\n                    url: media.url,\r\n                    imageID: imageID,\r\n                    row: row,\r\n                    linktype: 'image',\r\n                    link: null\r\n                });\r\n            }\r\n        }\r\n        \r\n        const images = props.attributes.images.concat(newImages);\r\n        props.setAttributes({images: images});\r\n        \r\n        window.dragGallery.waitForImages();\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    function getNextAvailableID() {\r\n        \r\n        let next = 1;\r\n        for(let i = 0; i < props.attributes.images.length; i++) {\r\n            if(props.attributes.images[i].imageID >= next) next = props.attributes.images[i].imageID+1;\r\n        }\r\n        return next;\r\n    }\r\n    \r\n    function getNextAvailableRow() {\r\n        \r\n        let next = 1;\r\n        for(let i = 0; i < props.attributes.images.length; i++) {\r\n            if(props.attributes.images[i].row >= next) next = props.attributes.images[i].row+1;\r\n        }\r\n        return next;\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    //window.dragGalleryEdit.setAttributeObject(this.props);\r\n\r\n\tsetTimeout(function() {\r\n\t\twindow.dragGallery.waitForImages();\r\n\t}, 0);\r\n    \r\n\treturn(\r\n        <div{...useBlockProps()}>\r\n        \r\n            <div className=\"drag-gallery\" data-blockid={props.clientId}>\r\n                <div className=\"wrapper\">\r\n                    {props.attributes.images.map(function(item, i) {\r\n\t                    return <DragGalleryImage key={i} data={item} parentprops={props} />;\r\n                    })}\r\n                </div>\r\n            </div>\r\n            \r\n\t\t\t<MediaUploadCheck>\r\n\t\t\t\t<MediaUpload\r\n\t\t\t\t\tallowedTypes={['image']}\r\n\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\tgallery={true}\r\n\t\t\t\t\tonSelect={selectImage}\r\n\t\t\t\t\trender={({open}) => (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tclassName=\"addmedia\"\r\n\t\t\t\t\t\t\tonClick={open}\r\n\t\t\t\t\t\t>Add Images</Button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t/>\r\n\t\t\t</MediaUploadCheck>\r\n        </div>\r\n    );\r\n}","/**\r\n * Registers a new block provided a unique name and an object defining its behavior.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\r\n */\r\nimport { registerBlockType } from '@wordpress/blocks';\r\n\r\n/**\r\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\r\n * All files containing `style` keyword are bundled together. The code used\r\n * gets applied both to the front of your site and to the editor. All other files\r\n * get applied to the editor only.\r\n *\r\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\r\n */\r\nimport './style.css';\r\nimport './editor.css';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Edit from './edit.js';\r\nimport DragGalleryEdit from './DragGalleryEdit.js';\r\nimport save from './save.js';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n\twindow.dragGalleryEdit = new DragGalleryEdit();\r\n}, false);\r\n\r\n/**\r\n * Every block starts by registering a new block type definition.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\r\n */\r\nregisterBlockType('create-block/drag-gallery', {\r\n\t/**\r\n\t * Used to construct a preview for the block to be shown in the block inserter.\r\n\t */\r\n\texample: {\r\n\t\tattributes: {\r\n\t\t\tmessage: 'Drag Gallery',\r\n\t\t},\r\n\t},\r\n\t/**\r\n\t * @see ./edit.js\r\n\t */\r\n\tedit: Edit,\r\n\t/**\r\n\t * @see ./save.js\r\n\t */\r\n\tsave,\r\n});","/**\r\n * React hook that is used to mark the block wrapper element.\r\n * It provides all the necessary props like the class name.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/packages/packages-block-editor/#useBlockProps\r\n */\r\nimport { useBlockProps } from '@wordpress/block-editor';\r\n\r\n/**\r\n * The save function defines the way in which the different attributes should\r\n * be combined into the final markup, which is then serialized by the block\r\n * editor into `post_content`.\r\n *\r\n * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#save\r\n *\r\n * @param {Object} props            Properties passed to the function.\r\n * @param {Object} props.attributes Available block attributes.\r\n * @return {WPElement} Element to render.\r\n */\r\nexport default function save({ attributes }) {\r\n\tconst blockProps = useBlockProps.save();\r\n\t\r\n    setTimeout(function() {\r\n        window.dragGallery.waitForImages();\r\n    }, 0);\r\n    \r\n    return (\r\n        <div className=\"drag-gallery loading\">\r\n            <div className=\"wrapper\">\r\n                {attributes.images.map(function(item, i) {\r\n                    \r\n\t\t\t\t\tlet image;\r\n                    \r\n\t\t\t\t\tswitch(item.linktype) {\r\n\t\t\t\t\t\tcase 'image':\r\n\t\t\t\t\t\t\timage = <a href={item.url}><img src={item.url} data-id={item.id} /></a>;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'url':\r\n\t\t\t\t\t\t\timage = <a href={item.link}><img src={item.url} data-id={item.id} /></a>;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'none':\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\timage = <img src={item.url} data-id={item.id} />;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n                    \r\n                    return <div\r\n                        className=\"image\"\r\n                        key={item.imageID}\r\n                        data-imageid={item.imageID}\r\n                        data-row={item.row}\r\n                    >\r\n                        {image}\r\n                    </div>;\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n    \r\n}\r\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"element\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdrag_gallery\"] = self[\"webpackChunkdrag_gallery\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["DragGalleryEdit","constructor","dragScrollObj","int","speed","MIN_DRAG","scrollSelector","imageMove","bind","imageUp","dragScroll","setAttributeObject","props","getClientPos","e","referencePos","clientX","clientY","touches","length","originalEvent","closest","closest_dist","getDistance","x","y","i","dist","pos","anim_scroll","locY","time","jQuery","animate","scrollTop","getRow","gallery","row_num","row_image_arr","Array","images","find","image","parseFloat","attr","push","removeFromRow","arr","splice","getNextAvailableRow","next","self","each","index","rowNum","getAttImagesCopy","attributes","map","getAttImgCopy","att_images","att_img","Object","assign","getOverImage","over_image","drag","data","overY_image","image_rect","getBoundingClientRect","clientPos","bottom","top","prev_image","prev_rect","dist_prev","Math","abs","row","window","dragGallery","right","left","getOverDirec","over_rect","dist_top","dist_bottom","dist_left","dist_right","closestY","loc","closestX","direc","startDrag","currentTarget","parents","addClass","dragging","document","on","downClientPos","distX","distY","createElement","append","clone","offset","outerHeight","outerWidth","screenHeight","innerHeight","screenMarginPercent","clearInterval","setInterval","overImageIndex","overImageRowNum","overImageRow","overImageRowIndex","indexOf","removeClass","css","includes","getREM","remove","rowIndex","insertIndex","dragGalleryEdit","removeIndex","setAttributes","renderRows","scrollTarget","scrollOffset","position","scrollerclass","slice","el","hasClass","parent","off","removeData","useEffect","createRef","useState","Component","Fragment","wp","element","MediaUpload","MediaUploadCheck","blockEditor","Button","IconButton","Toolbar","ToolbarGroup","ToolbarButton","components","DragGalleryImage","imageDown","imageClick","replaceImage","linkClick","linkCancel","linkUpdate","getArrayCopy","getObjectCopy","obj","parentprops","not","media","selected","current","id","url","waitForImages","linksettings","linkoption_none_checked","linkoption_image_checked","linkoption_custom_checked","linktype","fieldIds","getFieldIds","linkoption_none_input","linkoption_none_id","linkoption_image_input","linkoption_image_id","linkoption_custom_input","linkoption_custom_id","prop","item","selected_input","linkoption_group_id","customurl_input","customlink_id","val","link","clientId","imageId","imageID","renderToolbar","open","render","useBlockProps","Edit","selectImage","newImages","getNextAvailableID","match","lastImage","concat","setTimeout","registerBlockType","save","addEventListener","example","message","edit","blockProps"],"sourceRoot":""}