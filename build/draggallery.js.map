{"version":3,"file":"draggallery.js","mappings":"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","sources":["webpack://drag-gallery/./src/draggallery.js"],"sourcesContent":["class DragGallery {\r\n\r\n\tconstructor() {\r\n\t\t\r\n\t\t/*\r\n\t\t//console.log('jQuery: ' + jQuery);\r\n\t\t//console.log('$: ' + $);\r\n\t\t\r\n\t\ttry{\r\n\t\t\tif(jQuery) {\r\n\t\t\t\tthis.jQuery = jQuery;\r\n\t\t\t}else{\r\n\t\t\t\tconsole.log('jQuery not found');\r\n\t\t\t}\r\n\t\t}catch(e) {\r\n\t\t\tconsole.log('jQuery not found');\r\n\t\t}\r\n\t\t\r\n\t\tif(!this.jQuery) {\r\n\t\t\ttry{\r\n\t\t\t\tif($ && $.jquery) {\r\n\t\t\t\t\tthis.jQuery = $;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log('$ not found');\r\n\t\t\t\t}\r\n\t\t\t}catch(e) {\r\n\t\t\t\tconsole.log('$ not found');\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tif(jQuery) {\r\n\t\t\tthis.renderRows = this.renderRows.bind(this);\r\n\t\t\tthis.waitForImages = this.waitForImages.bind(this);\r\n\t\t\tthis.imgLoad = this.imgLoad.bind(this);\r\n\r\n\t\t\tjQuery(window).on('resize orientationchange', this.renderRows);\r\n\r\n\t\t\tjQuery(document).ready(this.waitForImages);\r\n\t\t\tjQuery(window).on('load', this.waitForImages);\r\n\r\n\t\t\tthis.waitForImages();\r\n\t\t}\r\n\t}\r\n\r\n\twaitForImages() {\r\n\t\t\r\n\t\tthis.renderRows();\r\n\t\t\r\n\t\tconst self = this;\r\n\r\n\t\tjQuery('.drag-gallery img').each(function(index) {\r\n\t\t\t//if(!jQuery(this).data('imgLoadListening')) {\r\n\t\t\t\t//jQuery(this).data('imgLoadListening', true);\r\n\r\n\t\t\t\tjQuery(this).one(\"load\", self.imgLoad);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(this.complete) jQuery(this).trigger('load');\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//console.log(e);\r\n\t\t\t\t}\r\n\t\t\t//}\r\n\t\t});\r\n\t}\r\n\timgLoad(e) {\r\n\t\t\r\n\t\tthis.renderRows();\r\n\t\t\r\n\t\tconst gallery = jQuery(e.target).parents('.drag-gallery')[0];\r\n\r\n\t\tlet ready = true;\r\n\t\tjQuery(gallery).find('img').each(function(index) {\r\n\t\t\tif(!this.complete && this.naturalWidth > 0) {\r\n\t\t\t\tjQuery(this).addClass('loaded');\r\n\t\t\t\tready = false;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(ready) {\r\n\t\t\tjQuery(gallery).removeClass('loading');\r\n\t\t\tjQuery(gallery).find('img').removeClass('loaded');\r\n\r\n\t\t\t//this.renderRows();\r\n\t\t}\r\n\t}\r\n\r\n\tgetREM() {\r\n\t\treturn parseFloat(jQuery(':root').css('font-size').replace('px', ''));\r\n\t}\r\n\r\n\t/*\r\n\tGet an array of all image elements in a row\r\n\t@param gallery(element): .drag-gallery element\r\n\t@param row_num(int): if row_image is null, row_num can be used instead\r\n\t*/\r\n\tgetRow(gallery, row_num) {\r\n\r\n\t\tlet row_image_arr = new Array();\r\n\r\n\t\tlet images = jQuery(gallery).find('.image');\r\n\r\n\t\tfor(let i = 0; i < images.length; i++) {\r\n\t\t\tconst image = images[i];\r\n\r\n\t\t\tif(parseFloat(jQuery(image).attr('data-row')) == row_num) {\r\n\t\t\t\trow_image_arr.push(image);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row_image_arr;\r\n\t}\r\n\r\n\trenderRows() {\r\n\r\n\t\tconst self = this;\r\n\r\n\t\tjQuery('.drag-gallery').each(function(index) {\r\n\t\t\tconst images = jQuery(this).find('.image');\r\n\r\n\t\t\t//Get all rows as arrays\r\n\t\t\tconst rows = new Array();\r\n\t\t\tfor(let i = 0; i < images.length; i++) {\r\n\r\n\t\t\t\tconst row_num = parseFloat(jQuery(images[i]).attr('data-row'));\r\n\r\n\t\t\t\tlet in_row = false;\r\n\t\t\t\tfor(let j = 0; j < rows.length; j++) {\r\n\t\t\t\t\tif(rows[j].row_num == row_num) {\r\n\t\t\t\t\t\tin_row = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!in_row) {\r\n\t\t\t\t\trows.push({\r\n\t\t\t\t\t\trow_num: row_num,\r\n\t\t\t\t\t\timages: self.getRow(this, parseFloat(jQuery(images[i]).attr('data-row')))\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Render each row\r\n\t\t\tfor(let i = 0; i < rows.length; i++) {\r\n\t\t\t\tconst row = rows[i].images;\r\n\t\t\t\tself.renderRow(row);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tgetNaturalDimensions(img) {\r\n\t\tlet naturalWidth = img.naturalWidth;\r\n\t\tif(!naturalWidth) {\r\n\t\t\tnaturalWidth = 6;\r\n\t\t}\r\n\t\t\r\n\t\tlet naturalHeight = img.naturalHeight;\r\n\t\tif(!naturalHeight) {\r\n\t\t\tnaturalHeight = 9;\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tnaturalWidth: naturalWidth,\r\n\t\t\tnaturalHeight: naturalHeight\r\n\t\t};\r\n\t}\r\n\trenderRow(row) {\r\n\r\n\t\tif(row.length == 1) {\r\n\r\n\t\t\tconst image = row[0];\r\n\t\t\tconst gallery = jQuery(image).parents('.drag-gallery')[0];\r\n\t\t\tconst width = jQuery(image).parent().innerWidth() - this.getSpaceX(gallery);\r\n\t\t\tconst img = jQuery(image).find('img')[0];\r\n\t\t\t\r\n\t\t\tconst naturalDimensions = this.getNaturalDimensions(img);\r\n\t\t\t\r\n\t\t\tjQuery(image)\r\n\t\t\t.css('width', '')\r\n\t\t\t.css('flex-basis', '')\r\n\t\t\t.css('height', width * (naturalDimensions.naturalHeight / naturalDimensions.naturalWidth)+'px');\r\n\t\t\t\r\n\t\t} else {\r\n\r\n\t\t\tconst gallery = jQuery(row[0]).parents('.drag-gallery');\r\n\t\t\t//const cWidth = jQuery(gallery).find('.wrapper').innerWidth();\r\n\t\t\t\r\n\t\t\tconst wrapper = jQuery(gallery).find('.wrapper')[0];\r\n\t\t\tconst wrapper_rect = wrapper.getBoundingClientRect();\r\n\t\t\t\r\n\t\t\tconst cWidth = wrapper_rect.width;\r\n\t\t\t\r\n\t\t\tvar self = this;\r\n\t\t\t\r\n\t\t\t// Generate array containing all image aspect ratios\r\n\t\t\tvar ratios = row.map(function(image, i) {\r\n\t\t\t\t\r\n\t\t\t\tlet ratio = 0;\r\n\t\t\t\tconst img = jQuery(image).find('img')[0];\r\n\t\t\t\t\r\n\t\t\t\tconst naturalDimensions = self.getNaturalDimensions(img);\r\n\t\t\t\t\r\n\t\t\t\tratio = naturalDimensions.naturalWidth / naturalDimensions.naturalHeight;\r\n\r\n\t\t\t\treturn ratio;\r\n\t\t\t});\r\n\r\n\t\t\t// Get sum of widths\r\n\t\t\tlet minRatio = Math.min.apply(Math, ratios);\r\n\t\t\tlet sumRatios = 0;\r\n\t\t\tfor(let i = 0; i < row.length; i++) {\r\n\t\t\t\tconst ratio = ratios[i];\r\n\t\t\t\tif(ratio != 0) sumRatios += ratio / minRatio;\r\n\t\t\t};\r\n\r\n\t\t\tlet sumMargins = row.length * this.getSpaceX(gallery);\r\n\r\n\t\t\t// Calculate dimensions\r\n\t\t\tif(sumRatios != 0) {\r\n\t\t\t\tfor(let i = 0; i < row.length; i++) {\r\n\t\t\t\t\tconst image = row[i];\r\n\t\t\t\t\tconst minWidth = (cWidth - sumMargins) / sumRatios;\r\n\r\n\t\t\t\t\tconst width = Math.floor(minWidth / minRatio) * ratios[i];\r\n\t\t\t\t\tconst height = Math.floor(minWidth / minRatio);\r\n\t\t\t\t\t\r\n\t\t\t\t\tjQuery(image)\r\n\t\t\t\t\t.css('height', height+'px')\r\n\t\t\t\t\t.css('width', width+'px')\r\n\t\t\t\t\t.css('flex-basis', width+'px');\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetSpaceY(gallery) {\r\n\t\t/*\r\n\t\tlet spaceY = 0;\r\n\r\n\t\tconst gridSpacing = jQuery('.drag-gallery').css('--gridSpacing');\r\n\t\tif(gridSpacing.endsWith('rem')) {\r\n\t\t\tspaceY = parseFloat(gridSpacing.replace('rem', '')) * this.getREM();\r\n\t\t} else if(gridSpacing.endsWith('px')) {\r\n\t\t\tspaceY = parseFloat(gridSpacing.replace('px', ''));\r\n\t\t} else {\r\n\t\t\tswitch(jQuery(gallery).css('display')) {\r\n\t\t\t\tcase 'grid':\r\n\t\t\t\t\tspaceY = parseFloat(jQuery(gallery).find('.image').eq(0).css('grid-row-gap').replace('px', ''));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tspaceY = parseFloat(jQuery(gallery).find('.image').eq(0).css('margin-bottom').replace('px', ''));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tlet spaceY = 0;\r\n\t\tif(gallery) {\r\n\t\t\tconst gridSpacing = jQuery(gallery).css('--gridSpacing');\r\n\t\t\t\r\n\t\t\tif(gridSpacing && gridSpacing != '') {\r\n\t\t\t\tspaceY = this.convertCssUnit(gridSpacing, gallery);\r\n\t\t\t}else{\r\n\t\t\t\tspaceY = parseFloat(jQuery(gallery).find('.image').eq(0).css('margin-bottom').replace('px', ''));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn spaceY;\r\n\t}\r\n\tgetSpaceX(gallery) {\r\n\t\t/*\r\n\t\tlet spaceX = 0;\r\n\r\n\t\tconst gridSpacing = jQuery('.drag-gallery').css('--gridSpacing');\r\n\t\tif(gridSpacing.endsWith('rem')) {\r\n\t\t\tspaceX = parseFloat(gridSpacing.replace('rem', '')) * this.getREM();\r\n\t\t} else if(gridSpacing.endsWith('px')) {\r\n\t\t\tspaceX = parseFloat(gridSpacing.replace('px', ''));\r\n\t\t} else {\r\n\t\t\tswitch(jQuery(gallery).css('display')) {\r\n\t\t\t\tcase 'grid':\r\n\t\t\t\t\tspaceX = parseFloat(jQuery(gallery).find('.image').eq(0).css('grid-column-gap').replace('px', ''));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tspaceX = parseFloat(jQuery(gallery).find('.image').eq(0).css('margin-right').replace('px', ''));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t*/\r\n\t\t\r\n\t\tlet spaceX = 0;\r\n\t\tif(gallery) {\r\n\t\t\tconst gridSpacing = jQuery(gallery).css('--gridSpacing');\r\n\t\t\t\r\n\t\t\tif(gridSpacing && gridSpacing != '') {\r\n\t\t\t\tspaceX = this.convertCssUnit(gridSpacing, gallery);\r\n\t\t\t}else{\r\n\t\t\t\tspaceX = parseFloat(jQuery(gallery).find('.image').eq(0).css('margin-right').replace('px', ''));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn spaceX;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Convert absolute CSS numerical values to pixels.\r\n\t *\r\n\t * @link https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units#numbers_lengths_and_percentages\r\n\t *\r\n\t * @param {string} cssValue\r\n\t * @param {null|HTMLElement} target Used for relative units.\r\n\t * @return {*}\r\n\t */\r\n\tconvertCssUnit( cssValue, target ) {\r\n\r\n\t    target = target || document.body;\r\n\r\n\t    const supportedUnits = {\r\n\r\n\t        // Absolute sizes\r\n\t        'px': value => value,\r\n\t        'cm': value => value * 38,\r\n\t        'mm': value => value * 3.8,\r\n\t        'q': value => value * 0.95,\r\n\t        'in': value => value * 96,\r\n\t        'pc': value => value * 16,\r\n\t        'pt': value => value * 1.333333,\r\n\r\n\t        // Relative sizes\r\n\t        'rem': value => value * parseFloat( getComputedStyle( document.documentElement ).fontSize ),\r\n\t        'em': value => value * parseFloat( getComputedStyle( target ).fontSize ),\r\n\t        'vw': value => value / 100 * window.innerWidth,\r\n\t        'vh': value => value / 100 * window.innerHeight,\r\n\r\n\t        // Times\r\n\t        'ms': value => value,\r\n\t        's': value => value * 1000,\r\n\r\n\t        // Angles\r\n\t        'deg': value => value,\r\n\t        'rad': value => value * ( 180 / Math.PI ),\r\n\t        'grad': value => value * ( 180 / 200 ),\r\n\t        'turn': value => value * 360\r\n\r\n\t    };\r\n\r\n\t    // Match positive and negative numbers including decimals with following unit\r\n\t    const pattern = new RegExp( `^([\\-\\+]?(?:\\\\d+(?:\\\\.\\\\d+)?))(${ Object.keys( supportedUnits ).join( '|' ) })$`, 'i' );\r\n\r\n\t    // If is a match, return example: [ \"-2.75rem\", \"-2.75\", \"rem\" ]\r\n\t    const matches = String.prototype.toString.apply( cssValue ).trim().match( pattern );\r\n\r\n\t    if ( matches ) {\r\n\t        const value = Number( matches[ 1 ] );\r\n\t        const unit = matches[ 2 ].toLocaleLowerCase();\r\n\r\n\t        // Sanity check, make sure unit conversion function exists\r\n\t        if ( unit in supportedUnits ) {\r\n\t            return supportedUnits[ unit ]( value );\r\n\t        }\r\n\t    }\r\n\r\n\t    return cssValue;\r\n\r\n\t};\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n\twindow.dragGallery = new DragGallery();\r\n}, false);"],"names":["DragGallery","constructor","jQuery","renderRows","bind","waitForImages","imgLoad","window","on","document","ready","self","each","index","one","complete","trigger","e","gallery","target","parents","find","naturalWidth","addClass","removeClass","getREM","parseFloat","css","replace","getRow","row_num","row_image_arr","Array","images","i","length","image","attr","push","rows","in_row","j","row","renderRow","getNaturalDimensions","img","naturalHeight","width","parent","innerWidth","getSpaceX","naturalDimensions","wrapper","wrapper_rect","getBoundingClientRect","cWidth","ratios","map","ratio","minRatio","Math","min","apply","sumRatios","sumMargins","minWidth","floor","height","getSpaceY","spaceY","gridSpacing","convertCssUnit","eq","spaceX","cssValue","body","supportedUnits","value","getComputedStyle","documentElement","fontSize","innerHeight","PI","pattern","RegExp","Object","keys","join","matches","String","prototype","toString","trim","match","Number","unit","toLocaleLowerCase","addEventListener","dragGallery"],"sourceRoot":""}